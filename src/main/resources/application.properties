spring.application.name=backend
spring.config.import=optional:file:.env[.properties]

# =====================================================
# CONFIGURACIÓN DE BASE DE DATOS POSTGRESQL
# =====================================================

# Conexión a PostgreSQL local
# Formato: jdbc:postgresql://host:puerto/nombre_base_datos
spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/clinica_juridica}
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:postgres}
spring.datasource.driver-class-name=org.postgresql.Driver

# Configuración del pool de conexiones HikariCP (incluido en Spring Boot)
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000

# =====================================================
# CONFIGURACIÓN DE JDBC
# =====================================================

# Deshabilitar auto-configuración de JPA (usamos JDBC puro)
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration

# Inicialización de base de datos
# mode: always = siempre ejecuta schema.sql
# mode: never = nunca ejecuta schema.sql (útil si la BD ya está creada)
spring.sql.init.mode=never
spring.sql.init.schema-locations=classpath:schema.sql
spring.sql.init.continue-on-error=false



# =====================================================
# CONFIGURACIÓN DE LOGGING
# =====================================================

# Nivel de log para SQL (útil para debugging)
logging.level.org.springframework.jdbc.core=DEBUG
logging.level.org.springframework.jdbc.core.JdbcTemplate=DEBUG
logging.level.org.springframework.jdbc.core.StatementCreatorUtils=TRACE

# Log de tu aplicación
logging.level.clinica_juridica.backend=DEBUG

# =====================================================
# CONFIGURACIÓN DEL SERVIDOR
# =====================================================

# Puerto del servidor (por defecto 8080)
server.port=8080

# Context path (por defecto /)
server.servlet.context-path=/

# =====================================================
# CONFIGURACIÓN DE SPRING SECURITY (TEMPORAL - DESARROLLO)
# =====================================================

# Deshabilitar CSRF para pruebas (NO usar en producción)
# Esto se puede configurar mejor en SecurityConfig.java
spring.security.user.name=admin
spring.security.user.password=admin123

# =====================================================
# CONFIGURACIÓN DE ENVÍO DE CORREOS
# =====================================================

# Configuración del servidor SMTP (Ejemplo con Gmail)
# spring.mail.protocol=smtp (por defecto)
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:clinica.backend@gmail.com}
spring.mail.password=${MAIL_PASSWORD:erdd oxnr tvbt tbjt }

spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.ssl.enable=false
spring.mail.properties.mail.smtp.ssl.trust=${MAIL_HOST:smtp.gmail.com}
spring.mail.properties.mail.smtp.connectiontimeout=30000
spring.mail.properties.mail.smtp.timeout=30000
spring.mail.properties.mail.debug=true
spring.mail.properties.mail.smtp.writetimeout=30000

# Configuración de notificaciones personalizadas
# Lista de correos separados por coma
app.notification.recipients=eduardocaballeroarmas10@gmail.com,cesarostosa@gmail.com
# Asunto del correo
app.notification.subject=${NOTIFICATION_SUBJECT:Notificación: El Backend se ha iniciado correctamente}

